<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gl.givuluv.mapper.OrgMapper">
	<insert id="insertOrg">
		insert into org(orgid, orgpw, orgname, orgcategory, logo, orgphone, ceoname, orgzipcode, orgaddr, orgaddrdetail, orgaddretc, orgunqnum) 
		values(#{orgid},#{orgpw},#{orgname}, #{orgcategory}, #{logo},#{orgphone},#{ceoname}, #{orgzipcode},#{orgaddr},#{orgaddrdetail},#{orgaddretc},#{orgunqnum})
	</insert>
	<select id="getOrgById">
		select * from org where orgid=#{orgid}
	</select>
	<select id="getOrgnameByOrgid">
		select orgname from org where orgid=#{orgid}
	</select>
	<select id="getOrgnameByCategory">
		select orgname from org where orgcategory=#{orgcategory};
	</select>
	<select id="getCategoryByOrgid">
		select orgcategory from org where orgid=#{orgid}
	</select>
	<select id="getOrgidByOrgname">
		select orgid from org where orgname=#{orgname}
	</select>
	<select id="getOrgnameListByOrgid">
		select orgname from org where orgid=#{connectionid}
	</select>
	<select id="checkUnqnumber">
		select count(*) > 0 from org where orgunqnum=#{orgunqnum}
	</select>
	<select id="checkPw">
		select * from org where orgpw=#{orgpw} LIMIT 1
	</select>
	<select id="checkRegisterByOrgid">
		select ifnull(max(isagree), 'n') as isagree from o_approve where orgid = #{loginOrg}
   </select>	
	<select id="getOrgPhoneByOrgid">
		select orgphone from org where orgid = #{orgid}
	</select>
	
	<select id="getCeoNameByOrgid">
		select ceoname from org where orgid = #{orgid}
	</select>
	
	<select id="getLogoByOrgid">
		select logo from org where orgid = #{orgid}
	</select>
	
	<select id="getOrgInfo" >
		select * from org where orgid = #{orgid}
	</select>
	
	<select id="getOrgSystemname">
		select systemname from file where connectionid = #{orgid}
	</select>
	
	<select id="getD_board">
		select d_title, target_amount, save_money, d_regdate, d_enddate from d_board where orgid = #{orgid}
	</select>
	
	<select id="getF_board">
		select f_title, target_amount, save_money, f_regdate, f_enddate from f_board where orgid = #{orgid}
	</select>
   	
	<update id="updateOrg">
		update org set orgpw=#{org.orgpw}, orgphone=#{org.orgphone}, ceoname=#{org.ceoname}
			where orgid = #{org.orgid}
	</update>
	<delete id="deleteOrg">
		delete from org where orgid=#{orgid}
	</delete>
	
	
</mapper>