<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <link rel="stylesheet" href="/css/logsignup.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
 <style>
    @import url('https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap');
 </style>
</head>
<body>
<div class="lsu_wrap">
    <!--헤더-->
    <div class="lsu_header">
		<div class="lsu_header_inner">
			<div class="lsu_logobox">
	    		<a href="/" class="lsu_logo">
	        	 	<img src="../images/GivuLuv_logo.png" alt="">
	    		</a>
	    		<a href="/" class="lsu_tit">
	        		기부러브
	    		</a>
				<span class="lsu_subtitle">기부러브로그 가입</span>
			</div>
		</div>			
	</div>
    <div class="lsu_main">
        <!--페이지별로 나타내는 디자인-->
        <ol class="lsu_step_list">
            <li class="lsu_step_item active">
                <i class="fa-regular fa-circle-check"></i>
                STEP1 신청등록
            </li>
            <li class="lsu_step_item">
                STEP2 단체정보
            </li>
            <li class="lsu_step_item">
                STEP3 재정 및 투명성
            </li>
            <li class="lsu_step_item">
                STEP4 가입신청 완료
            </li>
        </ol>
        <div class="lsu_form_area">
            <!--단체 확인-->
            <div class="lsu_form_fieldset">
                <h2 class="lsu_form_check">
                    단체확인
                    <span class="lsu_form_require_check">
                        필수항목
                    </span>
                </h2>
                <div class="lsu_form_content">
                   <div class="lsu_form_row">
                        <div class="lsu_form_col_left">
                            <label for="insitutename" class="lsu_form_checkname">
                                단체명
                            </label>
                        </div>
                        <div class="lsu_form_col_right">
                            <input id="insitutename" class="lsu_form_input_text" placeholder="1~30자 한글, 영문 숫자 사용가능">
                            <p class="lsu_form_input_desc">
                                고유번호증에 등록된 단체명으로 입력하세요
                            </p>
                        </div>
                   </div> 
                   <div class="lsu_form_row">
                        <div class="lsu_form_col_left">
                            <label for="uniquenumber" class="lsu_form_uniquenum">
                                고유번호
                            </label>
                        </div>
                        <div class="lsu_form_right">
                            <input id="uniquenumber" class="lsu_form_input_text"
                            placeholder="고유 번호 10자리를 '-'없이 입력">
                            <button type="button" id="uniquenumberbtn" class="lsu_button_unique">중복확인</button>
                        </div>
                        <div id="uniquenumber_result"></div>
                   </div>
                </div>        
            </div>
            <!--담당자 정보 및 비밀번호 입력칸-->
            <div class="lsu_form_fieldset">
                <h2 class="lsu_form_check">
                    담당자 정보 및 신청서 비밀번호
                    <span class="lsu_form_require_check">
                        필수항목
                    </span>
                </h2>
                <p class="lsu_form_content_tip">입력하신 정보는 이후 신청서 등록 시 수정이 불가한 항목입니다. 
                 정확하게 확인하신 후 등록해주세요.   
                </p>
                <div class="lsu_form_content">
                    <div class="lsu_form_row">
                        <div class="lsu_form_col_left">
                            <label for="managername" class="lsu_form_managername">
                                담당자 이름
                            </label>
                        </div>
                        <div class="lsu_form_col_right">
                            <input id="managername" class="lsu_form_input_text"
                            placeholder="1~15자 한글, 영문 사용가능">
                        </div>
                    </div>
                    <div class="lsu_form_row">
                        <div class="lsu_form_col_left">
                            <label for="managerid" class="isu_form_managerid">
                                담당자 ID
                            </label>
                        </div>
                        <div class="lsu_form_col_right">
                            <input id="managerid"
                            class="lsu_form_input_text"
                            placeholder="담당자 아이디를 입력해주세요">
                        </div>
                    </div>
                    <div class="lsu_form_row">
                        <div class="lsu_form_col_left">
                            <label for="password" class="lsu_form_password">
                                비밀번호
                            </label>
                        </div>
                        <div class="lsu_form_col_right">
                            <input type="password" id="password"
                            class="lsu_form_input_text"
                            placeholder=" 6~10자 영문,숫자 사용가능">
                        </div>
                    </div>
                    <div class="lsu_form_row">
                        <div class="lsu_form_col_left">
                            <label for="passwordcheck"
                            class="lsu_form_passwordcheck">
                                비밀번호 확인
                            </label>
                        </div>
                        <div class="lsu_form_col_right">
                            <input type="password" id="passwordcheck"
                            class="lsu_form_input_text"
                            placeholder="설정하신 비밀번호를 입력해주세요.">
                        </div>
                    </div>
                </div>
            </div>
            <!--페이지 넘어가는 버튼-->
            <div class="lsu_step_button">
                <button type="button" id="beforePage" class="lsu_button_prev">이전</button>
                <button type="button" id="nextPage" class="lsu_button_next">다음</button>
            </div>
        </div>
    </div>
    <div class="lsu_footer">
		<div class="lsu_footer_inner">
			 <p><a href="#">기부러브</a><span>Copyright © GivuLuv Corp. All Rights Reserved.</span></p>
		</div>
	</div>
</div>    
</body>
<script>
document.getElementById('uniquenumberbtn').addEventListener('click', function() {
    var uniquenumber = document.getElementById('uniquenumber').value;
    var resultDiv = document.getElementById('uniquenumber_result');

    // 고유 번호 길이 확인
    if (uniquenumber.length !== 10) {
        resultDiv.textContent = '고유 번호는 10자리여야 합니다.';
        return;
    }

    // AJAX 요청 생성
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/check_uniquenumber', true);
    xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');

    // 응답 처리
    xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                if (response.exists) {
                    resultDiv.textContent = '고유 번호가 중복됩니다.';
                    resultDiv.style.color = 'red';
                } else {
                    resultDiv.textContent = '고유 번호를 사용할 수 있습니다.';
                    resultDiv.style.color = 'green';
                }
            } else {
                resultDiv.textContent = '중복 확인 중 오류가 발생했습니다.';
                resultDiv.style.color = 'red';
            }
        }
    };

    // 요청 전송
    xhr.send(JSON.stringify({ uniquenumber: uniquenumber }));
});
</script>
   
</html>